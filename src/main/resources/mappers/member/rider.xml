<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="rider">
	<!-- 배달요청 목록을 최신순으로 나열 -->
	<select id = "delivery_list" resultType="com.example.eatclipse.model.commons.LogDTO">
	select * from Log group by no having status=2 order by no desc
	</select>
	
	<select id = "accept_list" resultType="com.example.eatclipse.model.commons.LogDTO">
	select * from log group by no having rider_name=#{name} and status=3 order by no desc
	</select>
	
	<!-- 배달수락 -->
	<update id="accept">
		update log set rider_name=#{rider_name}, status=(status+1) where no=#{no}
	</update>

<!-- 배달수락 -->
	<update id="complete">
		update log set end_date=now(), status=(status+1) where no=#{no}
	</update>
	
	<!-- 해당 no의 상세주문정보를 보여줌 -->
	<select id = "detail" resultType="com.example.eatclipse.model.commons.LogDTO">
	select * from Log where no=#{no};
	</select>
	
		<!-- 수정 -->
	<update id="update">
		update member set passwd=#{passwd}, name=#{name},email=#{email}, location=#{location}
		where userid=#{userid}
	</update>
	
		<delete id="delete">
		delete from member where userid=#{userid}
	</delete>
</mapper>